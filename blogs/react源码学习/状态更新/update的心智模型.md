# update 的心智模型

## 同步更新的 React

可以将**更新机制**类比**代码版本控制**

在没有版本控制前，我们在代码中逐步叠加功能。当我们需要紧急修复线上 bug 时，我们首先要将之前的代码提交。

在同步更新的 React 中，所有通过 ReactDOM.render 创建的应用都是通过类似的方式**更新状态**。

即没有**优先级**概念，**高优先级**需要排在其他**更新**后面执行

## 并发更新的 React

当有了**代码版本控制**，有线上 bug 修复时，我们暂存当前分支的修改，在 master 分支修复 bug 并上线。bug 修复上线后通过 git rebase 命令和开发分支链接上。开发分支基于修复 bug 的版本继续开发

在 React 中，通过 ReactDOM.createBlockingRoot 和 ReactDOM.createRoot 创建的应用会采用**并发**的方式**更新状态**。

**高优先级更新**中断正在进行中的**低优更新**，先完成**render-commit 流程**

待**高优更新**完成后，**低优更新** 基于 **高优更新**的结果 **重新更新**
